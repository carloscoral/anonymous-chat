(this["webpackJsonpanonymous-chat"]=this["webpackJsonpanonymous-chat"]||[]).push([[0],{26:function(e,n,t){e.exports=t(54)},50:function(e,n,t){},51:function(e,n,t){},52:function(e,n,t){},53:function(e,n,t){},54:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(11),i=t.n(o),c=t(3),u=t(1),s=t(2);function l(){var e=Object(s.a)(["\n  display: flex;\n  height: 100vh;\n  max-height: 100vh;\n  background-color: ",";\n  color: ",";\n"]);return l=function(){return e},e}var d=u.b.div(l(),(function(e){return e.theme.background}),(function(e){return e.theme.color})),m=t(5),f=t(6),h=t(4);function p(){var e=Object(s.a)(["\n  width: ",";\n  min-width: ",";\n  max-height: 100vh;\n  background-color: ",";\n  position: relative;\n  box-shadow: "," "," inset;\n  transition: width 500ms ease-in-out, min-width 500ms ease-in-out;\n  overflow: hidden;\n"]);return p=function(){return e},e}var v=u.b.div(p(),(function(e){return e.closed?"0":e.width||"300px"}),(function(e){return e.closed?"0":e.width||"300px"}),(function(e){return e.background||e.theme.secondaryBackground}),(function(e){return e.theme.boxShadowCenter}),(function(e){return e.boxShadowColor||e.theme.boxShadowColor}));function b(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: absolute;\n  top: 70px;\n  right: 0;\n  background-color: ",";\n  box-shadow: "," "," inset;\n  transform: translateX(100%);\n  border-radius: 0 100% 100% 0;\n  width: 35px;\n  height: 35px;\n  z-index: 10;\n"]);return b=function(){return e},e}var g=u.b.div(b(),(function(e){return e.background||e.theme.secondaryBackground}),(function(e){return e.theme.boxShadowCenter}),(function(e){return e.boxShadowColor||e.theme.boxShadowColor}));function x(){var e=Object(s.a)(["\n  box-shadow: "," ",";\n"]);return x=function(){return e},e}var w=function(e){switch(e.directionShadow){case"top":return e.theme.boxShadowTop;case"left":return e.theme.boxShadowLeft;case"right":return e.theme.boxShadowRight;case"center":return e.theme.boxShadowCenter;default:return e.theme.boxShadowBottom}},O=u.b.div(x(),(function(e){return w(e)}),(function(e){return e.boxShadowColor||e.theme.boxShadowColor}));function y(){var e=Object(s.a)(["\n  width: ",";\n  min-width: ",";\n  height: ",";\n  min-height: ",";\n  background-color: ",";\n  border-left: 1px solid ",";\n  border-right: 1px solid ",";\n  box-sizing: border-box;\n  position: relative;\n  z-index: 1;\n\n  & > * {\n    min-width: ",";\n  }\n"]);return y=function(){return e},e}var S,E=Object(u.b)(O)(y(),(function(e){return e.width||"100%"}),(function(e){return e.width||"100%"}),(function(e){return e.height||"60px"}),(function(e){return e.height||"60px"}),(function(e){return e.backgroundColor||e.theme.background}),(function(e){return e.borders?e.theme.divider:e.backgroundColor||e.theme.background}),(function(e){return e.borders?e.theme.divider:e.backgroundColor||e.theme.background}),(function(e){return e.width||"100%"}));!function(e){e.LIGHT="light",e.DARK="dark"}(S||(S={}));var j,k=S;!function(e){e.user="USER",e.group="GROUP"}(j||(j={}));var C=function(e){var n="[]";try{var t=window.localStorage.getItem(e);t&&(n=t)}catch(r){}return n},N=function(e,n,t){return function(r){var a=C("messages"),o=JSON.parse(a),i=[];t===j.user?e&&n&&(i=o.filter((function(t){return t.sender.id===n.id&&t.receiver.id===e.id||t.receiver.id===n.id&&t.sender.id===e.id}))):t===j.group&&e&&(i=o.filter((function(n){return n.receiver.id===e.id}))),r(I(i))}},_=function(){return function(e){var n=C("groups");e(A(JSON.parse(n)))}},I=function(e){return{type:"chat/update_message_list",payload:{messages:e}}},A=function(e){return{type:"chat/update_user_list",payload:{groups:e}}},J=function(e){return{type:"chat/update_user_list",payload:{users:e}}},B=function(e){return{type:"chat/set_current_conversation",payload:{unreadMessages:e}}},G=function(e){return{type:"system/update_session",payload:e}};var R=function(e){var n=e.title,t=Object(c.c)((function(e){return e})),o=t.ui,i=t.system,u=Object(r.useState)(!1),s=Object(h.a)(u,2),l=s[0],d=s[1],f=Object(r.useState)(""),p=Object(h.a)(f,2),v=p[0],b=p[1],g=o.themeName,x=i.user,w=Object(c.b)();return a.a.createElement(E,{width:"300px"},a.a.createElement("div",{className:"content-header"},l?a.a.createElement("span",{className:"align-vertical"},a.a.createElement("input",{type:"text",value:v,onChange:function(e){return b(e.target.value)}}),a.a.createElement("span",{className:"material-icons cursor small",onClick:function(){w(function(e,n){return function(t){var r=C("users"),a=JSON.parse(r),o=a.find((function(n){return n.id===(null===e||void 0===e?void 0:e.id)}));o&&(o.username=n,window.localStorage.setItem("users",JSON.stringify(a)),t(J(a)))}}(x,v));var e=Object(m.a)({},i,{user:Object(m.a)({},x,{username:v})});w(G(e)),d(!1)}},"check"),a.a.createElement("span",{className:"material-icons cursor small",onClick:function(){return d(!1)}},"close")):a.a.createElement("span",{className:"align-vertical"},n,a.a.createElement("span",{className:"material-icons cursor small",onClick:function(){d(!0),b((null===x||void 0===x?void 0:x.username)||"")}},"edit")),a.a.createElement("div",{className:"options"},a.a.createElement("span",{className:"material-icons cursor small",onClick:function(){w({type:"system/update_theme",payload:{themeName:g===k.LIGHT?k.DARK:k.LIGHT}})}},"invert_colors"),a.a.createElement("span",{className:"material-icons cursor small",onClick:function(){x&&w((function(e){window.localStorage.setItem("users",JSON.stringify([])),e(G({loggedIn:!1,session:null,user:null}))}))}},"power_settings_new"))))};function T(){var e=Object(s.a)(["\n  display: flex;\n  list-style: none;\n  margin: 0;\n\n  & > li {\n    margin-right: 5px;\n    text-transform: uppercase;\n    font-size: 0.8em;\n\n    &.active {\n      font-weight: bold;\n      color: ",";\n    }\n  }\n"]);return T=function(){return e},e}var H=u.b.ul(T(),(function(e){return e.theme.primary}));var L=function(e){var n=e.tabs,t=e.active,r=e.setActiveTab;return a.a.createElement(H,{className:"padded"},n.map((function(e){return a.a.createElement("li",{className:t===e?"active cursor":"cursor",key:e,onClick:function(){return r(e)}},e)})))};function D(){var e=Object(s.a)(["\n  display: flex;\n  margin: 0 0 10px 0;\n  position: relative;\n  padding: 0;\n  align-items: center;\n  background-color: ",";\n  color: ",";\n  box-shadow: "," ",";\n  padding: 10px;\n  border-radius: 5px;\n  cursor: ",";\n  transition: box-shadow 100ms ease-in-out;\n\n  &:hover {\n    box-shadow: "," ",";    \n  }\n"]);return D=function(){return e},e}var U=u.b.li(D(),(function(e){return e.active?e.theme.listItemActiveBackground:e.background||e.theme.background}),(function(e){return e.active?e.theme.listItemActiveColor:e.theme.color}),(function(e){return e.theme.boxShadowCenter}),(function(e){return e.boxShadowColor||e.theme.boxShadowColor}),(function(e){return e.link?"pointer":"initial"}),(function(e){return e.link?e.theme.boxShadowLinkHover:e.theme.boxShadowCenter}),(function(e){return e.boxShadowColor||e.theme.boxShadowColor}));function M(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 95%;\n  justify-content: ",";\n  margin: 0;\n  padding: 10px;\n  list-style: none;\n"]);return M=function(){return e},e}var z=u.b.ul(M(),(function(e){return e.reversed?"flex-end":"inherit"})),F=t(13),P=t.n(F);var K=function(e){var n=e.list,t=e.groups,r=e.setCurrentConversation,o=Object(c.c)((function(e){return e.chat})).currentConversation;return a.a.createElement(F.Scrollbars,{autoHide:!0},a.a.createElement(z,null,t?t.map((function(e){return a.a.createElement("div",{key:e},a.a.createElement("h4",{className:"subtitle"},e),n.filter((function(n){return n.type===e})).map((function(e){return a.a.createElement(U,{link:!0,key:e.id,onClick:function(){return r(e)},active:(n=e,(null===o||void 0===o?void 0:o.sender.id)===n.id)},a.a.createElement("span",{className:"material-icons icon"},"account_circle")," ",e.username);var n})))})):n.map((function(e){return a.a.createElement(U,{link:!0,key:e.id,onClick:function(){return r(e)}},a.a.createElement("span",{className:"material-icons icon"},"account_circle")," ",e.username)}))))};t(50);function X(){var e=Object(s.a)(["\n  display: flex;\n  align-items: center;\n  margin: ",";\n  background-color: ",";\n  border-radius: 20px;\n  box-shadow: ",";\n  overflow: hidden;\n\n  & > .icon {\n    padding: 0 10px;\n    color: ",";\n  }\n  & > input {\n    flex: 1 1 auto;\n    padding: 10px;\n    border: none;\n    background-color: transparent;\n\n    &:focus {\n      outline: none;\n    }\n  }\n"]);return X=function(){return e},e}var V=u.b.div(X(),(function(e){return e.margin||"10px"}),(function(e){return e.background||"#fff"}),(function(e){return e.shadow?"".concat(e.theme.boxShadowCenter," ").concat(e.theme.boxShadowColor):"none"}),(function(e){return e.iconColor||e.theme.primary}));var W=function(e){var n=e.onSearch,t=Object(r.useState)(""),o=Object(h.a)(t,2),i=o[0],c=o[1];return a.a.createElement(V,{shadow:!0,iconColor:"#333"},a.a.createElement("span",{className:"material-icons icon"},"search"),a.a.createElement("input",{className:"search-bar-input",type:"text",value:i,onChange:function(e){var t=e.target.value;c(t),n(t)}}))};function q(){var e=Object(s.a)(["\n  background-color: ",";\n  border: none;\n  border-radius: 5px;\n  padding: 10px;\n  box-sizing: border-box;\n  color: ",";\n  text-transform: uppercase;\n  font-weight: 500;\n  box-shadow:\n    ","\n    ",";\n  cursor: pointer;\n"]);return q=function(){return e},e}var Q=u.b.button(q(),(function(e){return e.background||e.theme.primary}),(function(e){return e.color||e.theme.color}),(function(e){return w(Object(m.a)({},e,{directionShadow:"center"}))}),(function(e){return e.boxShadowColor||e.theme.boxShadowColor}));var Y=function(){var e=Object(c.b)(),n=Object(r.useState)(""),t=Object(h.a)(n,2),o=t[0],i=t[1],u=Object(r.useState)("Friends"),s=Object(h.a)(u,2),l=s[0],d=s[1],m=["Friends","Radio","Social","Politics","Health","Technology","Sports","Hobbies","Bussiness"];return a.a.createElement("form",{className:"padded",onSubmit:function(n){n.preventDefault(),o&&e(function(e,n){return function(t){var r=C("groups"),a=JSON.parse(r);a=[{id:Date.now().toString(),username:e,type:n}].concat(Object(f.a)(a)),window.localStorage.setItem("groups",JSON.stringify(a)),t(A(a))}}(o,l))}},a.a.createElement("input",{type:"text",placeholder:"Group name",className:"extend",value:o,onChange:function(e){return i(e.target.value)}}),a.a.createElement("select",{className:"extend",onChange:function(e){return d(e.target.value)}},m.map((function(e){return a.a.createElement("option",{key:e,value:e},e)}))),a.a.createElement(Q,{color:"#fff",className:"extend"},"Create Group"))};var Z=function(){var e=Object(c.b)(),n=["Users","Groups"],t=Object(r.useState)(!0),o=Object(h.a)(t,2),i=o[0],u=o[1],s=Object(r.useState)(n[0]),l=Object(h.a)(s,2),d=l[0],p=l[1],b=Object(r.useState)([]),x=Object(h.a)(b,2),w=x[0],O=x[1],y=Object(r.useState)([]),S=Object(h.a)(y,2),E=S[0],j=S[1],k=Object(r.useState)(""),C=Object(h.a)(k,2),N=C[0],_=C[1],I=Object(c.c)((function(e){return e})),A=I.system,J=I.chat,B=A.user,G=J.users,T=J.groups,H=J.privateChats,D=J.unreadMessages;Object(r.useEffect)((function(){var e=w.filter((function(e){return e.username.toLowerCase().match(N)}));j(e)}),[N,w]),Object(r.useEffect)((function(){O("Users"===d?U():"Groups"===d?T:[])}),[d,G,T,H,D]);var U=function(){if(B){var e=G.filter((function(e){return e.id!==B.id}));return Object(f.a)(e).map((function(e){return H.find((function(n){return e.id===n.id}))?e.type="Private":e.type="Others",Object(m.a)({},e,{unread:!!D.find((function(n){return e.id===n}))})}))}return G};return a.a.createElement("div",{className:"relative"},a.a.createElement(g,{className:"cursor",onClick:function(){u(!i)}},i?a.a.createElement("span",{className:"material-icons"},"close"):a.a.createElement("span",{className:"material-icons"},"menu")),a.a.createElement(v,{className:"max-height side-nav",closed:!i},a.a.createElement(R,{title:null===B||void 0===B?void 0:B.username}),a.a.createElement("h1",{className:"title padded"}," Chats "),a.a.createElement(L,{tabs:n,active:d,setActiveTab:p}),"Groups"===d&&a.a.createElement(Y,null),a.a.createElement(W,{onSearch:function(e){_(e)}}),a.a.createElement("div",{className:"list-container"},a.a.createElement(K,{list:E,groups:"Users"===d?["Private","Others"]:"Groups"===d?["Friends","Radio","Social","Politics","Health","Technology","Sports","Hobbies","Bussiness"]:["Others"],setCurrentConversation:function(n){var t="USER";"Users"===d?(null===H||void 0===H?void 0:H.find((function(e){return(null===n||void 0===n?void 0:n.id)===e.id})))||H&&e(function(e){return{type:"chat/update_private_chats",payload:{privateChats:e}}}([n].concat(Object(f.a)(H)))):"Groups"===d&&(t="GROUP");e({type:"chat/set_current_conversation",payload:{currentConversation:{type:t,sender:n}}})}}))))};function $(){var e=Object(s.a)(["\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  flex: 1 1 auto;\n  height: 100%;\n  max-height: 100%;\n  position: relative;\n"]);return $=function(){return e},e}var ee=u.b.div($());var ne=function(e){var n=e.title;return a.a.createElement(E,{borders:!0},a.a.createElement("strong",{className:"align-vertical"},a.a.createElement("span",{className:"material-icons icon"},"account_circle")," ",n))};function te(){var e=Object(s.a)(["\n  width: auto;\n  max-width: ",";\n  padding: 5px 10px;\n  background: ",";\n  color: ",";\n  position: relative;\n  align-self: ",";\n  border-radius: 5px;\n  margin-bottom: 3px;\n  position: relative;\n\n  &:hover > .button {\n    opacity: 1;\n  }\n\n  & > .button {\n    position: absolute;\n    top: 5px;\n    right: 5px;\n    font-size: 0.8em;\n    color: red;\n    background-color: rgba(255, 255, 255, 0.5);\n    cursor: pointer;\n    opacity: 0;\n    transition: opacity 200ms ease-in-out;\n    border-radius: 2px;\n  }\n\n  & > .message-info {\n    font-size: 0.7em;\n    text-align: right;\n  }\n"]);return te=function(){return e},e}var re=u.b.li(te(),(function(e){return e.maxWidth||"60%"}),(function(e){return e.backgroundColor||(e.gradient?(n=e.theme.primary,t=e.theme.secondary,"linear-gradient(90deg, ".concat(n," 0%, ").concat(t," 100%)")):e.theme.secondaryBackground);var n,t}),(function(e){return e.gradient?"#fff":e.color||e.theme.color}),(function(e){return e.right?"flex-end":"flex-start"}));var ae=function(e){var n=e.className,t=Object(c.b)(),o=Object(c.c)((function(e){return e.chat})),i=o.messages,u=o.hiddenMessages,s=Object(r.useRef)(null),l=Object(c.c)((function(e){return e.system})).user,d=Object(r.useState)([]),m=Object(h.a)(d,2),p=m[0],v=m[1];Object(r.useEffect)((function(){if(s){var e=s.current;if(e){var n=e.getScrollHeight();e.scrollTop(n)}}}),[s,i]),Object(r.useEffect)((function(){var e=null===i||void 0===i?void 0:i.filter((function(e){return!(null===u||void 0===u?void 0:u.includes(e.id))}));v(e||[])}),[i,u]);var b=function(e){return e.sender.id===(null===l||void 0===l?void 0:l.id)};return a.a.createElement(P.a,{className:n,ref:s},a.a.createElement(z,{reversed:!0},p.map((function(e){return a.a.createElement(re,{key:e.id,backgroundColor:b(e)?void 0:"#ddd",gradient:b(e),color:(b(e),"#333"),right:b(e)},a.a.createElement("div",{className:"message-info"},e.sender.username," says:"),a.a.createElement("span",{className:"material-icons button",onClick:function(){return function(e){t(function(e){return{type:"chat/update_hidden_messages;",payload:{hiddenMessages:e}}}([e.id].concat(Object(f.a)(u||[]))))}(e)}},"close")," ",e.text)}))))};var oe=function(e){var n=e.onSend,t=Object(r.useState)(""),o=Object(h.a)(t,2),i=o[0],c=o[1],u=function(){n(i),c("")};return a.a.createElement(O,{directionShadow:"top"},a.a.createElement(V,{className:"limit-width",margin:"10px auto",background:"#eee"},a.a.createElement("input",{type:"text",value:i,onChange:function(e){c(e.target.value)},onKeyUp:function(e){13===e.keyCode&&u()}}),a.a.createElement("span",{className:"material-icons icon cursor",onClick:u},"send")))};t(51);var ie=function(){var e,n=Object(c.b)(),t=Object(c.c)((function(e){return e})),r=t.chat,o=t.system,i=r.currentConversation,u=o.user;return a.a.createElement(ee,null,a.a.createElement(ne,{title:null===(e=null===i||void 0===i?void 0:i.sender)||void 0===e?void 0:e.username}),i&&a.a.createElement(ee,null,a.a.createElement(ae,{className:"extend limit-width"}),a.a.createElement(oe,{onSend:function(e){if(e){var t=JSON.parse(C("messages"));if(u&&i){var r={id:Date.now().toString(),sender:u,receiver:i.sender,read:!1,text:e};t.push(r),window.localStorage.setItem("messages",JSON.stringify(t)),n(N(null===i||void 0===i?void 0:i.sender,u,null===i||void 0===i?void 0:i.type))}}}}))||a.a.createElement("div",{className:"limit-width"},"Start a conversation"))};var ce=function(){var e=Object(c.c)((function(e){return e})),n=e.chat,t=e.system,o=t.loggedIn,i=t.user,u=n.currentConversation,s=Object(c.b)();return Object(r.useEffect)((function(){var e=function(){s((function(e){var n=C("users");e(J(JSON.parse(n)))})),s(_()),s(N(null===u||void 0===u?void 0:u.sender,i,null===u||void 0===u?void 0:u.type)),s(function(e){return function(n){if(e){var t=C("messages"),r=JSON.parse(t).filter((function(n){return n.receiver.id===e.id})).map((function(e){return e.receiver.id}));n(B(r))}}}(i))};return window.addEventListener("storage",e),function(){window.removeEventListener("storage",e)}})),Object(r.useEffect)((function(){s(N(null===u||void 0===u?void 0:u.sender,i,null===u||void 0===u?void 0:u.type)),s(_())}),[s,u,i]),Object(r.useEffect)((function(){o||s((function(e){var n=Date.now().toString(),t={loggedIn:!0,session:Date.now().toString(),user:{id:n,username:"Anon".concat(n)}},r=window.localStorage.getItem("users");r=r?JSON.parse(r):[],r=[t.user].concat(Object(f.a)(r)),window.localStorage.setItem("users",JSON.stringify(r)),e(G(t)),e(J(r))}))}),[o,s]),a.a.createElement(d,null,a.a.createElement(Z,null),a.a.createElement(ie,null))},ue={primary:"#7652EA",secondary:"#CA91F2",background:"#fff",secondaryBackground:"#F8FAFB",color:"#333",boxShadowColor:"rgba(20, 0, 20, 0.2)",boxShadowBottom:"0 3px 10px",boxShadowTop:"0 -3px 10px",boxShadowLeft:"-3px 0 10px",boxShadowRight:"3px 0 10px",boxShadowCenter:"0 0 10px",boxShadowLinkHover:"0 0 12px 2px",listItemActiveBackground:"#333",listItemActiveColor:"#ddd",divider:"rgba(20, 0, 20, 0.1)"},se=Object(m.a)({},ue),le=Object(m.a)({},ue,{background:"#333",secondaryBackground:"#2a2a2a",color:"#ddd",listItemActiveBackground:"#fff",listItemActiveColor:"#333"}),de=function(e){switch(e){case k.DARK:return le;default:return se}};t(52);var me=function(){var e=Object(c.c)((function(e){return e.ui})).themeName;return a.a.createElement(u.a,{theme:de(e)},a.a.createElement(ce,null))},fe=t(7),he=t(25),pe={loggedIn:!1,session:null,user:null},ve={themeName:k.LIGHT},be={users:[],groups:[],messages:[],privateChats:[],unreadMessages:[],hiddenMessages:[]},ge="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||fe.d,xe=Object(fe.c)({system:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"system/update_session":return Object(m.a)({},e,{},n.payload);default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"system/update_theme":return Object(m.a)({},e,{},n.payload);default:return e}},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"chat/set_unread":case"chat/update_user_list":case"chat/update_group_list":case"chat/update_message_list":case"chat/set_current_conversation":case"chat/update_private_chats":case"chat/update_hidden_messages;":return Object(m.a)({},e,{},n.payload);default:return e}}}),we=Object(fe.e)(xe,ge(Object(fe.a)(he.a)));t(53);i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(c.a,{store:we},a.a.createElement(me,null))),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.6be37763.chunk.js.map